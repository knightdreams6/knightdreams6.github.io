import{_ as s,o as a,c as n,b as e}from"./app-d8497c2f.js";const l={},t=e(`<p>需求:</p><blockquote><p>将 /home/imaboss/bank_imaboss 下所有.sql文件备份到一个新的docker[mysql5.7]中</p></blockquote><h4 id="_1-下载镜像" tabindex="-1"><a class="header-anchor" href="#_1-下载镜像" aria-hidden="true">#</a> 1. 下载镜像</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">docker</span> pull mysql:5.7
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_2-启动容器" tabindex="-1"><a class="header-anchor" href="#_2-启动容器" aria-hidden="true">#</a> 2. 启动容器</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">docker</span> run <span class="token parameter variable">--name</span> mysql <span class="token parameter variable">-p</span> <span class="token number">3306</span>:3306 <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123</span> <span class="token parameter variable">-d</span> mysql:5.7 --character-set-server<span class="token operator">=</span>utf8mb4 --collation-server<span class="token operator">=</span>utf8mb4_unicode_ci <span class="token parameter variable">--lower_case_table_names</span><span class="token operator">=</span><span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_3-汇总所有-sql文件生成sqlall-sql文件" tabindex="-1"><a class="header-anchor" href="#_3-汇总所有-sql文件生成sqlall-sql文件" aria-hidden="true">#</a> 3. 汇总所有.sql文件生成sqlAll.sql文件</h4><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">import</span> os

path <span class="token operator">=</span> <span class="token string">&quot;/home/imaboss/bank_imaboss&quot;</span>

summaryFileName <span class="token operator">=</span> <span class="token string">&quot;sqlAll.sql&quot;</span>

fileList <span class="token operator">=</span> os<span class="token punctuation">.</span>listdir<span class="token punctuation">(</span>path<span class="token punctuation">)</span>

<span class="token comment"># 打开文件</span>
<span class="token builtin">file</span> <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span>path <span class="token operator">+</span> <span class="token string">&quot;/&quot;</span> <span class="token operator">+</span> summaryFileName<span class="token punctuation">,</span> <span class="token string">&quot;w&quot;</span><span class="token punctuation">)</span>

result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> fileName <span class="token keyword">in</span> fileList<span class="token punctuation">:</span>
	<span class="token keyword">if</span> fileName <span class="token operator">!=</span> summaryFileName<span class="token punctuation">:</span>
		result<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">&#39;source /home/bank_imaboss/&#39;</span><span class="token operator">+</span>fileName<span class="token operator">+</span><span class="token string">&quot;;\\n&quot;</span><span class="token punctuation">)</span>

<span class="token builtin">file</span><span class="token punctuation">.</span>writelines<span class="token punctuation">(</span>result<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-拷贝到容器" tabindex="-1"><a class="header-anchor" href="#_4-拷贝到容器" aria-hidden="true">#</a> 4. 拷贝到容器</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">docker</span> <span class="token function">cp</span> /home/imaboss/bank_imaboss/ mysql:/home/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_5-进入容器" tabindex="-1"><a class="header-anchor" href="#_5-进入容器" aria-hidden="true">#</a> 5. 进入容器</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> mysql /bin/bash
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_6-链接mysql" tabindex="-1"><a class="header-anchor" href="#_6-链接mysql" aria-hidden="true">#</a> 6. 链接mysql</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#  --default-character-set=utf8  防止中文乱码</span>
mysql <span class="token parameter variable">-u</span> root <span class="token parameter variable">-p</span> --default-character-set<span class="token operator">=</span>utf8 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-执行sqlall-sql" tabindex="-1"><a class="header-anchor" href="#_7-执行sqlall-sql" aria-hidden="true">#</a> 7.执行sqlAll.sql</h4><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">use</span> imaboss<span class="token punctuation">;</span>
source <span class="token operator">/</span>home<span class="token operator">/</span>bank_imaboss<span class="token operator">/</span>sqlAll<span class="token punctuation">.</span><span class="token keyword">sql</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>`,16),i=[t];function o(p,r){return a(),n("div",null,i)}const d=s(l,[["render",o],["__file","mysqlshujuqianyi.html.vue"]]);export{d as default};
