<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.67">
    <script>
      (function() {
        const userMode = localStorage.getItem('vuepress-reco-color-scheme') || 'auto';
        const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

        if (userMode === 'dark' || (userMode === 'auto' && systemDarkMode)) {
          document.documentElement.classList.toggle('dark', true);
        }
      })();
    </script>
    <title>Mybatis一级缓存 | Knightdreams'Blog</title><meta name="description" content="Blog">
    <link rel="modulepreload" href="/assets/app-c430818d.js"><link rel="modulepreload" href="/assets/Mybatisyijihuancun.html-895b39dc.js"><link rel="modulepreload" href="/assets/Mybatisyijihuancun.html-26402f92.js"><link rel="prefetch" href="/assets/index.html-0a05feab.js" as="script"><link rel="prefetch" href="/assets/index.html-8c2edf06.js" as="script"><link rel="prefetch" href="/assets/index.html-4b3ba946.js" as="script"><link rel="prefetch" href="/assets/index.html-0bb65ab7.js" as="script"><link rel="prefetch" href="/assets/index.html-4204965d.js" as="script"><link rel="prefetch" href="/assets/index.html-ca578b98.js" as="script"><link rel="prefetch" href="/assets/index.html-55a77791.js" as="script"><link rel="prefetch" href="/assets/index.html-2ceaa43c.js" as="script"><link rel="prefetch" href="/assets/index.html-a2578442.js" as="script"><link rel="prefetch" href="/assets/index.html-2b8b2faa.js" as="script"><link rel="prefetch" href="/assets/index.html-051f986d.js" as="script"><link rel="prefetch" href="/assets/index.html-5e53650f.js" as="script"><link rel="prefetch" href="/assets/index.html-1d285bfc.js" as="script"><link rel="prefetch" href="/assets/index.html-f03dc1d2.js" as="script"><link rel="prefetch" href="/assets/index.html-cfc01373.js" as="script"><link rel="prefetch" href="/assets/index.html-ff18e998.js" as="script"><link rel="prefetch" href="/assets/index.html-46a92963.js" as="script"><link rel="prefetch" href="/assets/index.html-10993ac1.js" as="script"><link rel="prefetch" href="/assets/index.html-1a64e81c.js" as="script"><link rel="prefetch" href="/assets/index.html-d4810458.js" as="script"><link rel="prefetch" href="/assets/index.html-93b00c29.js" as="script"><link rel="prefetch" href="/assets/index.html-743cadcd.js" as="script"><link rel="prefetch" href="/assets/index.html-bd12e174.js" as="script"><link rel="prefetch" href="/assets/index.html-ed5792c1.js" as="script"><link rel="prefetch" href="/assets/index.html-9eb1513a.js" as="script"><link rel="prefetch" href="/assets/index.html-9db08046.js" as="script"><link rel="prefetch" href="/assets/index.html-138b6510.js" as="script"><link rel="prefetch" href="/assets/index.html-dbe1e240.js" as="script"><link rel="prefetch" href="/assets/index.html-f3f14f09.js" as="script"><link rel="prefetch" href="/assets/index.html-3dd4ee6c.js" as="script"><link rel="prefetch" href="/assets/index.html-8838a9fa.js" as="script"><link rel="prefetch" href="/assets/index.html-7053b800.js" as="script"><link rel="prefetch" href="/assets/index.html-b35cc598.js" as="script"><link rel="prefetch" href="/assets/index.html-db045277.js" as="script"><link rel="prefetch" href="/assets/index.html-7d2733a9.js" as="script"><link rel="prefetch" href="/assets/index.html-4e418448.js" as="script"><link rel="prefetch" href="/assets/index.html-8186470d.js" as="script"><link rel="prefetch" href="/assets/index.html-5c65c28e.js" as="script"><link rel="prefetch" href="/assets/index.html-b57fc99d.js" as="script"><link rel="prefetch" href="/assets/index.html-8c17c2e9.js" as="script"><link rel="prefetch" href="/assets/index.html-85c02b49.js" as="script"><link rel="prefetch" href="/assets/index.html-30840ab5.js" as="script"><link rel="prefetch" href="/assets/index.html-a1d115fd.js" as="script"><link rel="prefetch" href="/assets/index.html-6cf06f14.js" as="script"><link rel="prefetch" href="/assets/index.html-1a88d37b.js" as="script"><link rel="prefetch" href="/assets/index.html-c8e98ed0.js" as="script"><link rel="prefetch" href="/assets/index.html-800887e5.js" as="script"><link rel="prefetch" href="/assets/index.html-06f5ab5e.js" as="script"><link rel="prefetch" href="/assets/index.html-5d669565.js" as="script"><link rel="prefetch" href="/assets/index.html-cda0070c.js" as="script"><link rel="prefetch" href="/assets/index.html-fe378dda.js" as="script"><link rel="prefetch" href="/assets/index.html-7190133b.js" as="script"><link rel="prefetch" href="/assets/RedisyuMySQLshuangxieyizhixingruhebaozheng.html-12c1624f.js" as="script"><link rel="prefetch" href="/assets/hulianwangjiagouweishimeyaozuoweifuwuhua.html-e5dfc24b.js" as="script"><link rel="prefetch" href="/assets/hulianwangjiagou，ruhejinxingrongliangsheji.html-9ee4d057.js" as="script"><link rel="prefetch" href="/assets/fenbushiyuweifuwuqubie.html-bd74fea4.js" as="script"><link rel="prefetch" href="/assets/miaoshaxitongjiagouyouhuasilu.html-8a487f82.js" as="script"><link rel="prefetch" href="/assets/yasuosuanfa.html-cd7031d3.js" as="script"><link rel="prefetch" href="/assets/fanxiangdaili.html-b1be2d67.js" as="script"><link rel="prefetch" href="/assets/lingyuqudongsheji.html-1953e7e9.js" as="script"><link rel="prefetch" href="/assets/winsock.html-054f5283.js" as="script"><link rel="prefetch" href="/assets/jiazaidll.html-744650ab.js" as="script"><link rel="prefetch" href="/assets/duquchuankoushuju.html-21066b8b.js" as="script"><link rel="prefetch" href="/assets/dockerFile.html-659adb2a.js" as="script"><link rel="prefetch" href="/assets/dockerxiugaijingxiang.html-ccd51794.js" as="script"><link rel="prefetch" href="/assets/dockeranzhuangRabbitMQ.html-c54cb8c1.js" as="script"><link rel="prefetch" href="/assets/dockeranzhuangelasticsearch.html-78076ae8.js" as="script"><link rel="prefetch" href="/assets/dockeranzhuangmysql.html-abe90201.js" as="script"><link rel="prefetch" href="/assets/dockeranzhuangmysqlzhucongfuzhi.html-e9994d0f.js" as="script"><link rel="prefetch" href="/assets/dockeranzhuangnginx.html-77466438.js" as="script"><link rel="prefetch" href="/assets/CopyOnWriteArrayList.html-6f73c7a5.js" as="script"><link rel="prefetch" href="/assets/ForkJoinPool.html-c7f7b2e5.js" as="script"><link rel="prefetch" href="/assets/JDBC.html-7286742d.js" as="script"><link rel="prefetch" href="/assets/OOM.html-2261da67.js" as="script"><link rel="prefetch" href="/assets/Stringleishejichengbukebiandeyuanyin.html-83cf839e.js" as="script"><link rel="prefetch" href="/assets/javaSEyinandian.html-01ab3014.js" as="script"><link rel="prefetch" href="/assets/javaSEmianshiti（yi）.html-50895ff3.js" as="script"><link rel="prefetch" href="/assets/javaSEmianshiti（er）.html-db847ca4.js" as="script"><link rel="prefetch" href="/assets/javanacunquyu.html-3f4fe1d5.js" as="script"><link rel="prefetch" href="/assets/javasuodefenlei.html-a53547f0.js" as="script"><link rel="prefetch" href="/assets/jvmmianshiti.html-bce1ba0a.js" as="script"><link rel="prefetch" href="/assets/synchronizedsuo.html-00a21d38.js" as="script"><link rel="prefetch" href="/assets/volatileguanjianzi.html-e9b19a3d.js" as="script"><link rel="prefetch" href="/assets/duixiangchuangjiandeguocheng.html-8a0946a2.js" as="script"><link rel="prefetch" href="/assets/shuzu.html-dd0881d8.js" as="script"><link rel="prefetch" href="/assets/zhengqueshiyongequalsfangfa.html-e9a18ee3.js" as="script"><link rel="prefetch" href="/assets/xianchengchi.html-9cffb702.js" as="script"><link rel="prefetch" href="/assets/Redisnacunmanliaozenmeban.html-70804e74.js" as="script"><link rel="prefetch" href="/assets/rabbitmqduilieyujiaohuanji.html-5de21153.js" as="script"><link rel="prefetch" href="/assets/rediszhucongfuzhidekang.html-c5d86143.js" as="script"><link rel="prefetch" href="/assets/redisminglingchangjiandekang.html-00daaeea.js" as="script"><link rel="prefetch" href="/assets/redisshujuchijiuhuadekang.html-36034ffa.js" as="script"><link rel="prefetch" href="/assets/redisdenacuntaotaijizhi.html-0ee9f337.js" as="script"><link rel="prefetch" href="/assets/redisgaojitexing-weicaozuo.html-45f79ea1.js" as="script"><link rel="prefetch" href="/assets/daodishimeshihougaiyongmq.html-797bf974.js" as="script"><link rel="prefetch" href="/assets/mysq(wu)biaosuoyuxingsuo.html-35168bdb.js" as="script"><link rel="prefetch" href="/assets/mysql(yi)suoyin.html-e64798de.js" as="script"><link rel="prefetch" href="/assets/mysql(san)suoyinyouhua.html-eafd1c06.js" as="script"><link rel="prefetch" href="/assets/mysql(er)explain.html-1aab5ae2.js" as="script"><link rel="prefetch" href="/assets/mysql(liu)zhucongfuzhi.html-7b4b485e.js" as="script"><link rel="prefetch" href="/assets/mysql(si)orderByyouhua.html-8e3fe96e.js" as="script"><link rel="prefetch" href="/assets/mysqlshujuqianyi.html-478739a7.js" as="script"><link rel="prefetch" href="/assets/mysqlbianmayuzifuji.html-a5bf2c92.js" as="script"><link rel="prefetch" href="/assets/nginxshiyongchangjingyuxiangguangainian.html-99975761.js" as="script"><link rel="prefetch" href="/assets/nginxchangyongpeizhi.html-85aa0bbd.js" as="script"><link rel="prefetch" href="/assets/nginxpeizhiyufa.html-8294fee3.js" as="script"><link rel="prefetch" href="/assets/Single thread vs child process vs worker threads vs cluster in nodejs.html-b6cc1814.js" as="script"><link rel="prefetch" href="/assets/DNS.html-6935eb61.js" as="script"><link rel="prefetch" href="/assets/oauth2.html-38fa2483.js" as="script"><link rel="prefetch" href="/assets/oidc.html-345898ed.js" as="script"><link rel="prefetch" href="/assets/pipyuangenghuan.html-141e1957.js" as="script"><link rel="prefetch" href="/assets/pythondajianMiniotuchuang.html-c3da6a8c.js" as="script"><link rel="prefetch" href="/assets/stlmoxingjianmian.html-0a39b43c.js" as="script"><link rel="prefetch" href="/assets/ModelAttributezhujiedeshiyong.html-0e0445b1.js" as="script"><link rel="prefetch" href="/assets/Mybatisyiduiduo，duoduiyichaxun.html-87abf6ec.js" as="script"><link rel="prefetch" href="/assets/MybatiszhixingyitiaoSqlyujudeliucheng.html-93b3304b.js" as="script"><link rel="prefetch" href="/assets/ResourceyuAutowiredzhujiedequbie.html-7df5a652.js" as="script"><link rel="prefetch" href="/assets/SpringSecurity.html-b40839ab.js" as="script"><link rel="prefetch" href="/assets/Springboot-quartzdingshirenwu.html-77f11a27.js" as="script"><link rel="prefetch" href="/assets/SpringzhongBeandeshengmingzhouqi.html-f50e783e.js" as="script"><link rel="prefetch" href="/assets/Springshengmingshishiwu.html-5333f4b0.js" as="script"><link rel="prefetch" href="/assets/activitiliuchengyinqing.html-f9fca726.js" as="script"><link rel="prefetch" href="/assets/linuxyuwindowsqidongspringbootmingling.html-d9a4491c.js" as="script"><link rel="prefetch" href="/assets/mavenmingling.html-2be89436.js" as="script"><link rel="prefetch" href="/assets/springbootfasongyoujian.html-70d7548d.js" as="script"><link rel="prefetch" href="/assets/ByteBuddy.html-4f9dae97.js" as="script"><link rel="prefetch" href="/assets/Reflections.html-7fd0ccd4.js" as="script"><link rel="prefetch" href="/assets/seata.html-572aed4b.js" as="script"><link rel="prefetch" href="/assets/404.html-60b35caa.js" as="script"><link rel="prefetch" href="/assets/index.html-82cef86b.js" as="script"><link rel="prefetch" href="/assets/index.html-a7fecd27.js" as="script"><link rel="prefetch" href="/assets/index.html-72a32e75.js" as="script"><link rel="prefetch" href="/assets/index.html-896f299c.js" as="script"><link rel="prefetch" href="/assets/index.html-d95a2598.js" as="script"><link rel="prefetch" href="/assets/index.html-a8cf5a60.js" as="script"><link rel="prefetch" href="/assets/index.html-4301f235.js" as="script"><link rel="prefetch" href="/assets/index.html-d05e65bd.js" as="script"><link rel="prefetch" href="/assets/index.html-fd24bf36.js" as="script"><link rel="prefetch" href="/assets/index.html-7fb1354c.js" as="script"><link rel="prefetch" href="/assets/index.html-6dd7931e.js" as="script"><link rel="prefetch" href="/assets/index.html-7af5c1f1.js" as="script"><link rel="prefetch" href="/assets/index.html-9e1b174c.js" as="script"><link rel="prefetch" href="/assets/index.html-2d8e10a8.js" as="script"><link rel="prefetch" href="/assets/index.html-61296e33.js" as="script"><link rel="prefetch" href="/assets/index.html-065199a9.js" as="script"><link rel="prefetch" href="/assets/index.html-58502c51.js" as="script"><link rel="prefetch" href="/assets/index.html-a37019bf.js" as="script"><link rel="prefetch" href="/assets/index.html-36205ba9.js" as="script"><link rel="prefetch" href="/assets/index.html-a176d199.js" as="script"><link rel="prefetch" href="/assets/index.html-c17527ad.js" as="script"><link rel="prefetch" href="/assets/index.html-765b4e9e.js" as="script"><link rel="prefetch" href="/assets/index.html-d6f0caff.js" as="script"><link rel="prefetch" href="/assets/index.html-6fed4eb2.js" as="script"><link rel="prefetch" href="/assets/index.html-d7ead28d.js" as="script"><link rel="prefetch" href="/assets/index.html-c8c84110.js" as="script"><link rel="prefetch" href="/assets/index.html-d9a3ed79.js" as="script"><link rel="prefetch" href="/assets/index.html-85226291.js" as="script"><link rel="prefetch" href="/assets/index.html-ed82a37c.js" as="script"><link rel="prefetch" href="/assets/index.html-c192b42d.js" as="script"><link rel="prefetch" href="/assets/index.html-92cd38be.js" as="script"><link rel="prefetch" href="/assets/index.html-61da22fb.js" as="script"><link rel="prefetch" href="/assets/index.html-15571fcb.js" as="script"><link rel="prefetch" href="/assets/index.html-ec80c664.js" as="script"><link rel="prefetch" href="/assets/index.html-117b705f.js" as="script"><link rel="prefetch" href="/assets/index.html-fa141f7c.js" as="script"><link rel="prefetch" href="/assets/index.html-1efbcfb3.js" as="script"><link rel="prefetch" href="/assets/index.html-4a23e30f.js" as="script"><link rel="prefetch" href="/assets/index.html-79910e04.js" as="script"><link rel="prefetch" href="/assets/index.html-a3489647.js" as="script"><link rel="prefetch" href="/assets/index.html-c57ef842.js" as="script"><link rel="prefetch" href="/assets/index.html-445f10e7.js" as="script"><link rel="prefetch" href="/assets/index.html-c4389ad6.js" as="script"><link rel="prefetch" href="/assets/index.html-dfb64eb0.js" as="script"><link rel="prefetch" href="/assets/index.html-859ea50b.js" as="script"><link rel="prefetch" href="/assets/index.html-b3042f9b.js" as="script"><link rel="prefetch" href="/assets/index.html-fcc3f2a5.js" as="script"><link rel="prefetch" href="/assets/index.html-38db5350.js" as="script"><link rel="prefetch" href="/assets/index.html-4071338d.js" as="script"><link rel="prefetch" href="/assets/index.html-a271965d.js" as="script"><link rel="prefetch" href="/assets/index.html-29fa9052.js" as="script"><link rel="prefetch" href="/assets/index.html-634f0d3d.js" as="script"><link rel="prefetch" href="/assets/RedisyuMySQLshuangxieyizhixingruhebaozheng.html-08d7c7cd.js" as="script"><link rel="prefetch" href="/assets/hulianwangjiagouweishimeyaozuoweifuwuhua.html-26d50039.js" as="script"><link rel="prefetch" href="/assets/hulianwangjiagou，ruhejinxingrongliangsheji.html-dd00cc81.js" as="script"><link rel="prefetch" href="/assets/fenbushiyuweifuwuqubie.html-c20f1422.js" as="script"><link rel="prefetch" href="/assets/miaoshaxitongjiagouyouhuasilu.html-9456b10c.js" as="script"><link rel="prefetch" href="/assets/yasuosuanfa.html-9625445b.js" as="script"><link rel="prefetch" href="/assets/fanxiangdaili.html-8ce832de.js" as="script"><link rel="prefetch" href="/assets/lingyuqudongsheji.html-f6e0b4b3.js" as="script"><link rel="prefetch" href="/assets/winsock.html-12ba5cd9.js" as="script"><link rel="prefetch" href="/assets/jiazaidll.html-ffb6812d.js" as="script"><link rel="prefetch" href="/assets/duquchuankoushuju.html-71048603.js" as="script"><link rel="prefetch" href="/assets/dockerFile.html-3622165c.js" as="script"><link rel="prefetch" href="/assets/dockerxiugaijingxiang.html-d9150523.js" as="script"><link rel="prefetch" href="/assets/dockeranzhuangRabbitMQ.html-bb51e90c.js" as="script"><link rel="prefetch" href="/assets/dockeranzhuangelasticsearch.html-14dab1fd.js" as="script"><link rel="prefetch" href="/assets/dockeranzhuangmysql.html-c29a7e33.js" as="script"><link rel="prefetch" href="/assets/dockeranzhuangmysqlzhucongfuzhi.html-f30bc394.js" as="script"><link rel="prefetch" href="/assets/dockeranzhuangnginx.html-b3664252.js" as="script"><link rel="prefetch" href="/assets/CopyOnWriteArrayList.html-76808df3.js" as="script"><link rel="prefetch" href="/assets/ForkJoinPool.html-6595de77.js" as="script"><link rel="prefetch" href="/assets/JDBC.html-7a1f0a08.js" as="script"><link rel="prefetch" href="/assets/OOM.html-1e3b08cb.js" as="script"><link rel="prefetch" href="/assets/Stringleishejichengbukebiandeyuanyin.html-850d8250.js" as="script"><link rel="prefetch" href="/assets/javaSEyinandian.html-d94e8270.js" as="script"><link rel="prefetch" href="/assets/javaSEmianshiti（yi）.html-94b77159.js" as="script"><link rel="prefetch" href="/assets/javaSEmianshiti（er）.html-73375c63.js" as="script"><link rel="prefetch" href="/assets/javanacunquyu.html-9aca04cb.js" as="script"><link rel="prefetch" href="/assets/javasuodefenlei.html-cf1ce85b.js" as="script"><link rel="prefetch" href="/assets/jvmmianshiti.html-0a45809d.js" as="script"><link rel="prefetch" href="/assets/synchronizedsuo.html-7cb16501.js" as="script"><link rel="prefetch" href="/assets/volatileguanjianzi.html-3264fdca.js" as="script"><link rel="prefetch" href="/assets/duixiangchuangjiandeguocheng.html-37139347.js" as="script"><link rel="prefetch" href="/assets/shuzu.html-ee0baeb1.js" as="script"><link rel="prefetch" href="/assets/zhengqueshiyongequalsfangfa.html-db59bf2c.js" as="script"><link rel="prefetch" href="/assets/xianchengchi.html-c99a2870.js" as="script"><link rel="prefetch" href="/assets/Redisnacunmanliaozenmeban.html-f5e3705e.js" as="script"><link rel="prefetch" href="/assets/rabbitmqduilieyujiaohuanji.html-04ecc1a5.js" as="script"><link rel="prefetch" href="/assets/rediszhucongfuzhidekang.html-380a08da.js" as="script"><link rel="prefetch" href="/assets/redisminglingchangjiandekang.html-21ca3d0c.js" as="script"><link rel="prefetch" href="/assets/redisshujuchijiuhuadekang.html-a0897137.js" as="script"><link rel="prefetch" href="/assets/redisdenacuntaotaijizhi.html-508aa11c.js" as="script"><link rel="prefetch" href="/assets/redisgaojitexing-weicaozuo.html-979da4ff.js" as="script"><link rel="prefetch" href="/assets/daodishimeshihougaiyongmq.html-30e9ac0b.js" as="script"><link rel="prefetch" href="/assets/mysq(wu)biaosuoyuxingsuo.html-a0454da5.js" as="script"><link rel="prefetch" href="/assets/mysql(yi)suoyin.html-084a0e06.js" as="script"><link rel="prefetch" href="/assets/mysql(san)suoyinyouhua.html-a19e0b57.js" as="script"><link rel="prefetch" href="/assets/mysql(er)explain.html-22c72f54.js" as="script"><link rel="prefetch" href="/assets/mysql(liu)zhucongfuzhi.html-b0e1b60b.js" as="script"><link rel="prefetch" href="/assets/mysql(si)orderByyouhua.html-a1bdf104.js" as="script"><link rel="prefetch" href="/assets/mysqlshujuqianyi.html-1a76af4f.js" as="script"><link rel="prefetch" href="/assets/mysqlbianmayuzifuji.html-d9aa7286.js" as="script"><link rel="prefetch" href="/assets/nginxshiyongchangjingyuxiangguangainian.html-5932d5d6.js" as="script"><link rel="prefetch" href="/assets/nginxchangyongpeizhi.html-bdd4b223.js" as="script"><link rel="prefetch" href="/assets/nginxpeizhiyufa.html-7dd767da.js" as="script"><link rel="prefetch" href="/assets/Single thread vs child process vs worker threads vs cluster in nodejs.html-96a7c69a.js" as="script"><link rel="prefetch" href="/assets/DNS.html-6d697f76.js" as="script"><link rel="prefetch" href="/assets/oauth2.html-c19c7cf3.js" as="script"><link rel="prefetch" href="/assets/oidc.html-102f2ec2.js" as="script"><link rel="prefetch" href="/assets/pipyuangenghuan.html-1bb54fc4.js" as="script"><link rel="prefetch" href="/assets/pythondajianMiniotuchuang.html-96cac110.js" as="script"><link rel="prefetch" href="/assets/stlmoxingjianmian.html-bb693600.js" as="script"><link rel="prefetch" href="/assets/ModelAttributezhujiedeshiyong.html-d0a666f3.js" as="script"><link rel="prefetch" href="/assets/Mybatisyiduiduo，duoduiyichaxun.html-816541f7.js" as="script"><link rel="prefetch" href="/assets/MybatiszhixingyitiaoSqlyujudeliucheng.html-9d689d37.js" as="script"><link rel="prefetch" href="/assets/ResourceyuAutowiredzhujiedequbie.html-d97b9394.js" as="script"><link rel="prefetch" href="/assets/SpringSecurity.html-20fa78c2.js" as="script"><link rel="prefetch" href="/assets/Springboot-quartzdingshirenwu.html-22f94029.js" as="script"><link rel="prefetch" href="/assets/SpringzhongBeandeshengmingzhouqi.html-afe5aab2.js" as="script"><link rel="prefetch" href="/assets/Springshengmingshishiwu.html-93e27dc6.js" as="script"><link rel="prefetch" href="/assets/activitiliuchengyinqing.html-d4d984a7.js" as="script"><link rel="prefetch" href="/assets/linuxyuwindowsqidongspringbootmingling.html-1939aba4.js" as="script"><link rel="prefetch" href="/assets/mavenmingling.html-2a54313e.js" as="script"><link rel="prefetch" href="/assets/springbootfasongyoujian.html-3308bad0.js" as="script"><link rel="prefetch" href="/assets/ByteBuddy.html-2e43b831.js" as="script"><link rel="prefetch" href="/assets/Reflections.html-71bbce52.js" as="script"><link rel="prefetch" href="/assets/seata.html-a2077f75.js" as="script"><link rel="prefetch" href="/assets/404.html-6cbbbd56.js" as="script"><link rel="prefetch" href="/assets/reco-valine-a195b6e9.js" as="script"><link rel="prefetch" href="/assets/giscus-2a044aea-497f0bd4.js" as="script">
    <link rel="preload" href="/assets/style-b1578374.css" as="style"><link rel="stylesheet" href="/assets/style-b1578374.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><div class="common-wrapper series--no"><header class="navbar-container" style="top:0;"><div class="site-brand nav-item"><img class="logo" src="/logo.png" alt="Knightdreams&#39;Blog"><a href="/" class="site-name can-hide">Knightdreams&#39;Blog</a></div><div class="nav-item navbar-links-wrapper" style=""><div><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div><nav class="navbar-links"><!--[--><div class="navbar-links__item"><a href="/" class="link router-link-active" aria-label="Home"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Home<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/categories/concept/1/" class="link" aria-label="Categories"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Categories<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/tags/concept/1/" class="link" aria-label="Tags"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Tags<!--]--></span></span><!--[--><!--]--></a></div><!--]--></nav><span class="xicon-container btn-toggle-dark-mode btn--dark-mode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span><span class="xicon-container btn-toggle-menus"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><circle cx="16" cy="8" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="24" r="2" fill="currentColor"></circle></svg></span></div></header><!----><div class="mobile-menus-container"><nav class="navbar-links mobile"><!--[--><div class="navbar-links__item"><a href="/" class="link router-link-active" aria-label="Home"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Home<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/categories/concept/1/" class="link" aria-label="Categories"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Categories<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/tags/concept/1/" class="link" aria-label="Tags"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Tags<!--]--></span></span><!--[--><!--]--></a></div><!--]--></nav><div class="appearance"><span>Appearance</span><span class="xicon-container btn-toggle-dark-mode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span></div></div><div class="series-mask"></div><aside class="series-container"><div class="site-brand"><img class="logo" src="/logo.png" alt="Knightdreams&#39;Blog"><a href="/" class="site-name can-hide">Knightdreams&#39;Blog</a></div><!--[--><!--]--></aside><!--[--><main class="page-container"><h1 class="page-title">Mybatis一级缓存</h1><div class="page-info"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M16 4a5 5 0 1 1-5 5a5 5 0 0 1 5-5m0-2a7 7 0 1 0 7 7a7 7 0 0 0-7-7z" fill="currentColor"></path><path d="M26 30h-2v-5a5 5 0 0 0-5-5h-6a5 5 0 0 0-5 5v5H6v-5a7 7 0 0 1 7-7h6a7 7 0 0 1 7 7z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->knight<!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M26 4h-4V2h-2v2h-8V2h-2v2H6c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 22H6V12h20v14zm0-16H6V6h4v2h2V6h8v2h2V6h4v4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2020-11-25 15:02:54<!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M11.17 6l3.42 3.41l.58.59H28v16H4V6h7.17m0-2H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H16l-3.41-3.41A2 2 0 0 0 11.17 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->java/framework<!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M10 14a4 4 0 1 1 4-4a4.005 4.005 0 0 1-4 4zm0-6a2 2 0 1 0 1.998 2.004A2.002 2.002 0 0 0 10 8z" fill="currentColor"></path><path d="M16.644 29.415L2.586 15.354A2 2 0 0 1 2 13.941V4a2 2 0 0 1 2-2h9.941a2 2 0 0 1 1.414.586l14.06 14.058a2 2 0 0 1 0 2.828l-9.943 9.943a2 2 0 0 1-2.829 0zM4 4v9.942L18.058 28L28 18.058L13.942 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Mybatis java<!--]--></span></span><!----></div><div class="theme-reco-default-content"><div><p>转自：https://blog.csdn.net/luanlouis/article/details/41280959</p><h5 id="_1、什么是一级缓存-为什么使用一级缓存" tabindex="-1"><a class="header-anchor" href="#_1、什么是一级缓存-为什么使用一级缓存" aria-hidden="true">#</a> 1、什么是一级缓存？为什么使用一级缓存？</h5><blockquote><p>每当我们使用<em><strong>MyBatis</strong></em>开启一次和数据库的会话，<em><strong>MyBatis</strong></em>会创建出<strong>一个<em>SqlSession</em>对象表示一次数据库会话</strong>。</p><p>在对数据库的一次会话中，我们有可能会反复地执行完全相同的查询语句，如果不采取一些措施的话，每一次查询都会查询一次数据库,而我们在极短的时间内做了完全相同的查询，那么它们的结果极有可能完全相同，由于查询一次数据库的代价很大，这有可能造成很大的资源浪费。</p><p>为了解决这一问题，减少资源的浪费，<em><strong>MyBatis</strong></em><strong>会在表示会话的SqlSession对象中建立一个简单的缓存，将每次查询到的结果结果缓存起来，当下次查询的时候，如果判断先前有个完全一样的查询，会直接从缓存中直接将结果取出，返回给用户，不需要再进行一次数据库查询了。</strong></p><p><strong>MyBatis会在一次会话的标识----一个SqlSession对象中创建一个本地缓存(local cache)，对于每一次查询，都会尝试根据查询的条件去本地缓存中查找是否在缓存中，如果在缓存中，就直接从缓存中取出，然后返回给用户；否则，从数据库读取数据，将查询结果存入缓存并返回给用户。</strong></p><p><strong>对于会话（Session）级别的数据缓存，我们称之为一级数据缓存，简称一级缓存。</strong></p></blockquote><h5 id="_2、mybatis中的一级缓存是怎样组织的-即sqlsession中的缓存是怎样组织的" tabindex="-1"><a class="header-anchor" href="#_2、mybatis中的一级缓存是怎样组织的-即sqlsession中的缓存是怎样组织的" aria-hidden="true">#</a> 2、Mybatis中的一级缓存是怎样组织的？（即SqlSession中的缓存是怎样组织的？）</h5><blockquote><p>由于<em><strong>MyBatis</strong></em>使用<em><strong>SqlSession</strong></em>对象表示一次数据库的会话，那么，对于会话级别的一级缓存也应该是在SqlSession中控制的。</p><p>实际上, <em><strong>SqlSession</strong></em>只是一个<em><strong>MyBatis</strong></em>对外的接口，<em><strong>SqlSession</strong></em>将它的工作交给了<em><strong>Executor</strong></em>执行器这个角色来完成，负责完成对数据库的各种操作。当创建了一个<em><strong>SqlSession</strong></em>对象时，<em><strong>MyBatis</strong></em>会为这个<em><strong>SqlSession</strong></em>对象创建一个新的<em><strong>Executor</strong></em>执行器，而缓存信息就被维护在这个<em><strong>Executor</strong></em>执行器中，<em><strong>MyBatis</strong></em>将缓存和对缓存相关的操作封装成了Cache接口中。<em><strong>SqlSession</strong></em>、<em><strong>Executor</strong></em>、<em><strong>Cache</strong></em>之间的关系如下列类图所示：</p></blockquote><p><img src="https://img-blog.csdn.net/20141120100824184" alt="img"></p><blockquote><p>如上述的类图所示，<em><strong>Executor</strong></em>接口的实现类<em><strong>BaseExecutor</strong></em>中拥有一个<em><strong>Cache</strong></em>接口的实现类<em><strong>PerpetualCache</strong></em>，则对于<em><strong>BaseExecutor</strong></em>对象而言，它将使用<em><strong>PerpetualCache</strong></em>对象维护缓存。</p><p><strong>PerpetualCache</strong>实现原理其实很简单，其内部就是通过一个简单的<em><strong>HashMap&lt;k,v&gt;</strong></em> 来实现的，没有其他的任何限制</p></blockquote><h5 id="_3、一级缓存的生命周期有多长" tabindex="-1"><a class="header-anchor" href="#_3、一级缓存的生命周期有多长" aria-hidden="true">#</a> 3、一级缓存的生命周期有多长？</h5><blockquote><p><strong>a. <em>MyBatis</em></strong>在开启一个数据库会话时，会 创建一个新的<em><strong>SqlSession</strong></em>对象，<em><strong>SqlSession</strong></em>对象中会有一个新的<em><strong>Executor</strong></em>对象，<em><strong>Executor</strong></em>对象中持有一个新的<strong>PerpetualCache</strong>对象；当会话结束时，<em><strong>SqlSession</strong></em>对象及其内部的<em><strong>Executor</strong></em>对象还有<strong>PerpetualCache</strong>对象也一并释放掉。</p><p><strong>b.</strong> 如果<em><strong>SqlSession</strong></em>调用了**<em>close()<em><strong>方法，会释放掉一级缓存</strong>PerpetualCache</em></em>对象，一级缓存将不可用；</p><p><strong>c.</strong> 如果<em><strong>SqlSession</strong></em>调用了<em><strong>clearCache()</strong></em>，会清空<strong>PerpetualCache</strong>对象中的数据，但是该对象仍可使用；</p><p><strong>d.</strong> <strong>SqlSession</strong>中执行了任何一个<strong>update</strong>操作(<strong>update()、delete()、insert()</strong>) ，都会清空<strong>PerpetualCache</strong>对象的数据，但是该对象可以继续使用；</p></blockquote><h5 id="_4、sqlsession-一级缓存的工作流程" tabindex="-1"><a class="header-anchor" href="#_4、sqlsession-一级缓存的工作流程" aria-hidden="true">#</a> 4、SqlSession 一级缓存的工作流程</h5><blockquote><ol><li>对于某个查询，根据****statementId,params,rowBounds*<em><strong>来构建一个</strong>key</em><em>值，根据这个</em><em>key</em><em>值去缓存</em>***Cache*<em><strong>中取出对应的</strong>key</em>*值存储的缓存结果；</li><li>判断从****Cache*<em><strong>中根据特定的</strong>key</em>*值取的数据数据是否为空，即是否命中；</li><li>如果命中，则直接将缓存结果返回；</li><li>如果没命中： <ol><li>去数据库中查询数据，得到查询结果；</li><li>将key和查询到的结果分别作为<strong>key</strong>,<strong>value</strong>对存储到****Cache****中；</li><li>将查询结果返回；</li></ol></li></ol></blockquote><h5 id="_5、-cache接口的设计以及cachekey的定义-非常重要" tabindex="-1"><a class="header-anchor" href="#_5、-cache接口的设计以及cachekey的定义-非常重要" aria-hidden="true">#</a> 5、 Cache接口的设计以及CacheKey的定义（非常重要）</h5><blockquote><p>如下图所示，<strong>MyBatis</strong>定义了一个<em><strong>org.apache.ibatis.cache.Cache</strong></em>接口作为其<em><strong>Cache</strong></em>提供者的<strong>SPI(Service Provider Interface)</strong> ，所有的<strong>MyBatis</strong>内部的<em><strong>Cache</strong></em>缓存，都应该实现这一接口。<strong>MyBatis</strong>定义了一个<strong>PerpetualCache</strong>实现类实现了<strong>Cache</strong>接口，。</p><p><strong>MyBatis</strong>内部还有很多<strong>Cache</strong>接口的实现，一级缓存只会涉及到这一个<strong>PerpetualCache</strong>子类，<strong>Cache</strong>的其他实现将会放到二级缓存中<img src="https://img-blog.csdn.net/20141120134402285" alt="img"></p></blockquote><blockquote><p>我们知道，<strong>Cache最核心的实现其实就是一个Map，将本次查询使用的特征值作为key，将查询结果作为value存储到Map中</strong>。</p><p><strong>怎么来判断某两次查询时完全相同的查询？</strong></p><p>Mybatis认为，对于两次查询，如果以下条件都完全一样，那就认为是完全相同的两次查询：</p><ol><li><strong>传入的 statementId</strong></li><li><strong>查询时要求的结果集中的结果范围（结果范围通过 <code>rowBounds.offset</code>和<code>rowBounds.limit</code>表示）</strong>。</li><li>这次查询所产生的最终要传递给<code>JDBC java.sql.PreparedStatement</code>的sql语句字符串 <code>boundSql.getSql()</code></li><li>传递给 <code>java.sql.Statement</code> 要设置的参数值</li></ol><p>现在分别解释上述四个条件：</p><ol><li><p>传入的<strong>statementId</strong>，对于<strong>MyBatis</strong>而言，你要使用它，必须需要一个<strong>statementId</strong>，它代表着你将执行什么样的<strong>Sql</strong>；</p></li><li><p><strong>MyBatis</strong>自身提供的分页功能是通过****RowBounds*<em><strong>来实现的，它通过</strong>rowBounds.offset</em><em>和</em><em>rowBounds.limit</em>*来过滤查询出来的结果集，这种分页功能是基于查询结果的再过滤，而不是进行数据库的物理分页；</p></li></ol><p>由于<strong>MyBatis</strong>底层还是依赖于****JDBC*<em><strong>实现的，那么，对于两次完全一模一样的查询，<strong>MyBatis</strong>要保证对于底层</strong></em>*JDBC*<em><strong>而言，也是完全一致的查询才行。而对于</strong></em>*JDBC*<em><strong>而言，两次查询，只要传入给</strong></em>*JDBC*<em><strong>的</strong></em>*SQL****语句完全一致，传入的参数也完全一致，就认为是两次查询是完全一致的。</p><p>3、4两条MyBatis最本质的要求就是：</p><p>​ <strong>调用JDBC的时候，传入的SQL语句要完全相同，传递给JDBC的参数值也要完全相同。</strong></p><p>综上所述,CacheKey由以下条件决定：</p><p>​ <strong>statementId + rowBounds + 传递给JDBC的SQL + 传递给JDBC的参数值</strong></p></blockquote><h5 id="一级缓存的性能分析" tabindex="-1"><a class="header-anchor" href="#一级缓存的性能分析" aria-hidden="true">#</a> 一级缓存的性能分析</h5><h6 id="_1、mybatis对会话-session-级别的一级缓存设计比较简单-就简单地使用了hashmap进行维护-并没有对hashmap的容量和大小进行限制。" tabindex="-1"><a class="header-anchor" href="#_1、mybatis对会话-session-级别的一级缓存设计比较简单-就简单地使用了hashmap进行维护-并没有对hashmap的容量和大小进行限制。" aria-hidden="true">#</a> 1、Mybatis对会话（Session）级别的一级缓存设计比较简单，就简单地使用了HashMap进行维护，并没有对HashMap的容量和大小进行限制。</h6><blockquote><p>如果我一直使用某一个****SqlSession*<em><strong>对象查询数据，这样会不会导致</strong>HashMap</em><em>太大，而导致 java.lang.OutOfMemoryError错误啊？ 这么考虑也不无道理，不过</em><strong>MyBatis</strong>*的确是这样设计的。</p><p>*<em><em>*</em>*MyBatis**</em>***这样设计也有它自己的理由：</p><p>a. 一般而言****SqlSession*<em><strong>的生存时间很短。一般情况下使用一个</strong></em>*SqlSession****对象执行的操作不会太多，执行完就会消亡；</p><p>b. 对于某一个****SqlSession*<em><strong>对象而言，只要执行</strong></em>*update*<em><strong>操作（</strong></em>*update、insert、delete*<em><strong>），都会将这个</strong></em>*SqlSession****对象中对应的一级缓存清空掉，所以一般情况下不会出现缓存过大，影响JVM内存空间的问题；</p><p>c. 可以手动地释放掉****SqlSession****对象中的缓存。</p></blockquote><h6 id="_2、一级缓存是一个粗粒度的缓存-没有更新缓存和缓存过期的概念" tabindex="-1"><a class="header-anchor" href="#_2、一级缓存是一个粗粒度的缓存-没有更新缓存和缓存过期的概念" aria-hidden="true">#</a> 2、一级缓存是一个粗粒度的缓存，没有更新缓存和缓存过期的概念</h6><blockquote><p><strong>MyBatis</strong>的一级缓存就是使用了简单的<strong>HashMap</strong>，<strong>MyBatis</strong>只负责将查询数据库的结果存储到缓存中去， 不会去判断缓存存放的时间是否过长、是否过期，因此也就没有对缓存的结果进行更新这一说了。</p></blockquote><p>根据一级缓存的特性，在使用的过程中，我认为应该注意：</p><p>1、对于数据变化频率很大，并且需要高时效准确性的数据要求，我们使用****SqlSession*<em><strong>查询的时候，要控制好</strong></em>*SqlSession*<em><strong>的生存时间，</strong></em>*SqlSession*<em><strong>的生存时间越长，它其中缓存的数据有可能就越旧，从而造成和真实数据库的误差；同时对于这种情况，用户也可以手动地适时清空</strong></em>*SqlSession****中的缓存；</p><p>2、对于只执行、并且频繁执行大范围的****select*<em><strong>操作的</strong></em>*SqlSession*<em><strong>对象，</strong></em>*SqlSession****对象的生存时间不应过长。</p></div></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="xicon-container left meta-item-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M26 4h-4V2h-2v2h-8V2h-2v2H6c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 22H6V12h20v14zm0-16H6V6h4v2h2V6h8v2h2V6h4v4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Last Updated 11/10/2023, 7:26:54 AM<!--]--></span></span></div></footer><!----><!----></main><!--]--><!----></div></div><!----><!----><!--]--></div>
    <script type="module" src="/assets/app-c430818d.js" defer></script>
  </body>
</html>
